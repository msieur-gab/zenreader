<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#4f46e5">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="description" content="Save and read articles in a clean, distraction-free environment">
  <title>ZenKeeper</title>
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icons/icon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body data-theme="light" data-view="library">

  <!-- ========== LIBRARY VIEW ========== -->
  <section class="library" id="library-view">
    <header class="library__header">
      <h1 class="library__title">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
        </svg>
        ZenKeeper
      </h1>
      <button id="theme-toggle-lib" class="icon-btn" aria-label="Toggle theme" title="Toggle theme">
        <svg class="icon icon--sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="5"></circle>
          <line x1="12" y1="1" x2="12" y2="3"></line>
          <line x1="12" y1="21" x2="12" y2="23"></line>
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
          <line x1="1" y1="12" x2="3" y2="12"></line>
          <line x1="21" y1="12" x2="23" y2="12"></line>
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
        <svg class="icon icon--moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
      </button>
    </header>

    <!-- URL Input Form -->
    <form class="url-form" id="url-form">
      <div class="url-form__input-wrapper">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
          <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
        </svg>
        <input
          type="url"
          id="url-input"
          placeholder="Paste article URL..."
          autocomplete="off"
          autocapitalize="off"
          spellcheck="false"
        >
      </div>
      <button type="submit" class="btn btn--primary">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="12" y1="5" x2="12" y2="19"></line>
          <line x1="5" y1="12" x2="19" y2="12"></line>
        </svg>
        <span>Save</span>
      </button>
    </form>

    <div class="library__grid" id="article-grid">
      <!-- <article-card> Web Components populated here -->
    </div>

    <!-- Empty state -->
    <div class="library__empty" id="empty-state">
      <svg class="icon icon--large" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
        <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
      </svg>
      <h2>No articles yet</h2>
      <p>Paste a URL above to save your first article</p>
    </div>
  </section>

  <!-- ========== READER VIEW ========== -->
  <section class="reader-view" id="reader-view" hidden>
    <header class="header" id="header">
      <nav class="header__nav">
        <button id="back-to-library" class="icon-btn" aria-label="Back to library" title="Back to library">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="19" y1="12" x2="5" y2="12"></line>
            <polyline points="12 19 5 12 12 5"></polyline>
          </svg>
        </button>
        <button id="sidebar-toggle" class="icon-btn" aria-label="Toggle bookmarks" title="Toggle bookmarks">
          <svg class="icon icon--menu" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
          </svg>
          <svg class="icon icon--close" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
        <div class="header__meta">
          <h1 id="article-title">Article Title</h1>
          <p id="article-author">Author</p>
        </div>
      </nav>
      <div class="header__controls">
        <!-- Font size controls -->
        <div class="control-group" id="font-controls">
          <button id="font-decrease" class="icon-btn icon-btn--sm" aria-label="Decrease font size" title="Decrease font size">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="4 7 4 4 20 4 20 7"></polyline>
              <line x1="9" y1="20" x2="15" y2="20"></line>
              <line x1="12" y1="4" x2="12" y2="20"></line>
            </svg>
          </button>
          <span id="font-level">100%</span>
          <button id="font-increase" class="icon-btn icon-btn--sm" aria-label="Increase font size" title="Increase font size">
            <svg class="icon icon--lg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="4 7 4 4 20 4 20 7"></polyline>
              <line x1="9" y1="20" x2="15" y2="20"></line>
              <line x1="12" y1="4" x2="12" y2="20"></line>
            </svg>
          </button>
        </div>
        <a id="source-link" href="#" class="icon-btn" aria-label="View source" title="View source" target="_blank" rel="noopener noreferrer" hidden>
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
            <polyline points="15 3 21 3 21 9"></polyline>
            <line x1="10" y1="14" x2="21" y2="3"></line>
          </svg>
        </a>
        <button id="theme-toggle" class="icon-btn" aria-label="Toggle theme" title="Toggle theme">
          <svg class="icon icon--sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
          </svg>
          <svg class="icon icon--moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
          </svg>
        </button>
        <button id="bookmark-btn" class="icon-btn" aria-label="Add bookmark" title="Add bookmark">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
          </svg>
        </button>
      </div>
    </header>

    <main class="main">
      <aside class="sidebar" id="sidebar">
        <div class="sidebar__section">
          <header class="sidebar__header">
            <h2>Bookmarks</h2>
            <span class="badge" id="bookmark-count">0</span>
          </header>
          <ul class="sidebar__bookmarks" id="bookmark-list">
            <!-- Dynamically populated -->
          </ul>
        </div>
      </aside>

      <article class="reader" id="reader">
        <!-- Loading overlay -->
        <div class="reader__loading" id="loading-screen" hidden>
          <div class="loader">
            <svg class="icon icon--spinner" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="12" y1="2" x2="12" y2="6"></line>
              <line x1="12" y1="18" x2="12" y2="22"></line>
              <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line>
              <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line>
              <line x1="2" y1="12" x2="6" y2="12"></line>
              <line x1="18" y1="12" x2="22" y2="12"></line>
              <line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line>
              <line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>
            </svg>
          </div>
          <p id="load-status">Loading...</p>
          <progress id="load-progress" max="100" value="0"></progress>
        </div>

        <!-- Error state -->
        <div class="reader__error" id="error-screen" hidden>
          <svg class="icon icon--large" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="8" x2="12" y2="12"></line>
            <line x1="12" y1="16" x2="12.01" y2="16"></line>
          </svg>
          <p id="error-message">An error occurred</p>
          <button id="retry-btn" class="btn">Try Again</button>
        </div>

        <!-- Reader content -->
        <div class="reader__content" id="viewer-container"></div>
      </article>
    </main>

    <!-- Bottom navigation -->
    <nav class="page-nav" id="page-nav">
      <button id="prev-page" class="icon-btn" aria-label="Scroll up" title="Scroll up">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="18 15 12 9 6 15"></polyline>
        </svg>
      </button>
      <div class="page-nav__info">
        <span id="current-page">0%</span>
      </div>
      <button id="next-page" class="icon-btn" aria-label="Scroll down" title="Scroll down">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </button>
    </nav>
  </section>

  <!-- Confirmation Dialog -->
  <dialog id="confirm-dialog" class="dialog">
    <div class="dialog__content">
      <h3 id="dialog-title">Confirm</h3>
      <p id="dialog-message">Are you sure?</p>
      <div class="dialog__actions">
        <button id="dialog-cancel" class="btn btn--secondary">Cancel</button>
        <button id="dialog-confirm" class="btn btn--danger">Delete</button>
      </div>
    </div>
  </dialog>

  <!-- Toast notification -->
  <div id="toast" class="toast" aria-live="polite"></div>

  <!-- External Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/dexie@3.2.4/dist/dexie.min.js"></script>

  <!-- App Entry Point -->
  <script type="module" src="js/app.js"></script>
</body>
</html>
